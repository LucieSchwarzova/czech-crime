function callAjax(e,t,n,r){var i="?do=getCrimes";$.ajax({url:i,dataType:"json",data:{areacode:e,crimetype:t,timefrom:n,timeto:r},success:function(e){$dataPreloader.hide();e.crimesByArea&&populateResultTable($resultTable,e.crimesByArea);e.crimesByTime&&populateResultTable($result2Table,e.crimesByTime)},error:function(e){console.error("ajax error",e)}})}function populateResultTable(e,t){var n=e.find("tbody");n.empty();var r=["Code","Name","Population","CriminalityIndex","FoundSum","FoundSum","SolvedAdditionallySum","CommittedDruggedSum","CommittedAlcoholSum","CommittedRecidivstSum","CommittedUnder15Sum","Commited1517Sum","CommittedUnder18Sum","ChargedTotalSum","ChargedRecidivistSum","ChargedUnder15Sum","ChargedUnder15Sum","Charged1517Sum","ChargedWomenSum","DamageTotalSum","DamageFoundSum"];$.each(t,function(t,i){e==$result2Table&&r.unshift("FK_Time_Lookup");var s="<tr>";$.each(r,function(e,t){s+="<td>"+i[t]+"</td>"});s+="</tr>";var o=$(s);n.append(o)});e.show()}function resetTables(){var e=$resultTable.find("tbody");e.empty();$resultTable.hide();e=$result2Table.find("tbody");e.empty();$result2Table.hide()}var $apiForm=$("#api-form"),$crimeTypeSelect=$apiForm.find("#crime-type-select"),$areaSelect=$apiForm.find("#area-select"),$timeFromSelect=$apiForm.find("#time-from-select"),$timeToSelect=$apiForm.find("#time-to-select"),$dataPreloader=$(".data-preloader"),$resultTable=$("#result-table"),$result2Table=$("#result2-table");resetTables();$apiForm.on("submit",function(e){e.preventDefault();resetTables();$dataPreloader.show();var t=$areaSelect.val(),n=$crimeTypeSelect.val(),r=$timeFromSelect.val(),i=$timeToSelect.val();callAjax(t,n,r,i)});